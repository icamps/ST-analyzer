<script type="text/javascript">
var $j = jQuery.noConflict();
var cnt_sysinfo = 0;

$j(document).ready(function(){
    $j("#systemInfo #M_systemInfo #box #box_title, \
        #systemInfo #M_systemInfo #density #density_title").click(function() {
	var chk = $j(this).prop('checked');
	if (chk == true) {
	    cnt_sysinfo++;
	} else {
	    cnt_sysinfo--;
	    if (cnt_sysinfo < 0) {
		cnt_sysinfo = 0;
	    }
	}
	$j("#systemInfo #cnt_sysinfo").empty().append(cnt_sysinfo);
    });
    
    /* Initializing values */
    $j('#systemInfo #box #box_frmInt').val('1').css("color", "gray");
    $j('#systemInfo #box #box_outFile').val('output.dat').css("color", "gray");
    
    $j('#systemInfo #density #density_frmInt').val('1').css("color", "gray");
    $j('#systemInfo #density #density_outFile').val('output.dat').css("color", "gray");
    
    $j("#systemInfo #M_systemInfo").hide();
    $j("#systemInfo #chk_systemInfo").click(function () {
	$j("#systemInfo #M_systemInfo").toggle(this.checked);
    });

    $j("#systemInfo #box #box_form").hide();
    $j("#systemInfo #box #box_title").click(function () {
	$j("#systemInfo #box #box_form").toggle(this.checked);
	//alert($j(this).is(":checked"));
    });
    
    $j("#systemInfo #density #density_form").hide();
    $j("#systemInfo #density #density_title").click(function () {
    $j("#systemInfo #density #density_form").toggle(this.checked);
	//alert($j(this).is(":checked"));
    });

    /* ##########################################
     * Density
     * ########################################## */
    $j("#density_btn_vfy").click(function(){
	var bpath = $j("#proot option:selected").text();
	var stfile = $j("#stfile option:selected").text();
	var pdbfile = $j("#pdbfile option:selected").text();
	/* display waiting message */
	var msgWait = "Verifying the query... <img src='/static/images/circle2.gif' height='10' width='10' >"
	var query = $j("#systemInfo #density #density_query").val();
	
	$j("#vfy_msg").empty().append(msgWait);
	    var sndData = {
		'cmd'       : 'verify',
		'query'	    : query,
		'bpath'	    : bpath,
		'stfile'    : stfile,
		'pdbfile'   : pdbfile,
	    }

        var request = $j.ajax({
        type: "POST",
        url: '/gui/verify_query/',
        cache: false,
        data: sndData,
        //async: false,
        });
		    
        request.done(function(Jdata) {
            var obj = $j.parseJSON(Jdata);
            $j("#vfy_msg").empty().append("Verified!");
            $j("#dlg_selInfo #dlg_msg").empty().append(obj.selInfo);
	    $j("#dlg_selInfo").dialog({
		resizable: true,
		modal: true,
		height:500,
                width:600,
	    });

        });
          
        request.error(function(jqXHR, textStatus, errorThrown) {
            $j("#vfy_msg").empty().append(errorThrown);
        });
    });

    
});
</script>

<div id="systemInfo">
    <table>
	<tr>
	    <td colspan="2"><input type="checkbox" id="chk_systemInfo"><span class="st_font1 st_size3 st_color6"><b>System Information (<span id="cnt_sysinfo" class="st_font1 st_size3 st_color5">0</span>)</b></span></td>
	</tr>
	<tr><td colspan="2">
	    <table id="M_systemInfo">
		<!--- calculating box size --->
		<tr>
		    <td class="w_module"> </td>
		    <td>
			<div id="box">
			    <table>
				<tr>
				    <td colspan="2" class="st_color7 left">
					<input type="checkbox" id="box_title">Box size <br/><hr/>
				    </td>
				</tr>
				<tr>
				    <td class="w_module"></td>
				    <td>
					<div id="box_form">
					    <table>
						<tr>
						    <td class="bottom"><span class="module_font">Frame Interval</span></td>
						    <td class="bottom w15"></td>
						    <td class="bottom"><span class="module_font">Output File Name</span></td>
						</tr>
						<tr>
						    <td class="bottom"><input id="box_frmInt" class="module_txtbox_frm" type="text" name="box_frmInt"></td>
						    <td class="bottom w15"></td>
						    <td class="bottom"><input id="box_outFile" class="module_txtbox_output" type="text" name="box_outFile"></td>
						</tr>
					    </table>
					</div>
				    </td>
				</tr>
			    </table>
			</div>
		    </td>
		</tr>
		<!-- Box size end --->
		<!--- Density --->
		<!--
		<tr>
		    <td class="w_module"> </td>
		    <td>
			<div id="density">
			    <table>
				<tr>
				    <td colspan="2" class="st_color7 left">
					<input type="checkbox" id="density_title">Density <br/><hr/>
				    </td>
				</tr>
				<tr>
				    <td class="w_module"></td>
				    <td>
					<div id="density_form">
					    <table>
						<tr>
						    <td class="bottom"><span class="module_font">Frame Interval</span></td>
						    <td class="bottom w15"></td>
						    <td class="bottom"><span class="module_font">Output File Name</span></td>
						    <td class="bottom w15"></td>
						    <td class="center"><span class="module_font">Axis</span></td>
						    <td class="bottom w15"></td>
						    <td class="bottom"></td>
						</tr>
						<tr>
						    <td class="bottom"><input id="density_frmInt" class="module_txtbox_frm" type="text" name="density_frmInt"></td>	
						    <td class="bottom w15"></td>
						    <td class="bottom"><input id="density_outFile" class="module_txtbox_output" type="text" name="density_outFile"></td>
						    <td class="bottom w15"></td>
						    <td class="bottom">
							<select data-placeholder="Choose an axis" class="chzn-select" style="width:100px;" id="density_Axis" name="density_Axis">
							<option>ALL</option>
							<option>X</option>
							<option>Y</option>
							<option>Z</option>
							</select>
						    </td>
						    <td class="bottom w15"></td>
						    <td class="bottom"></td>
						</tr>
						<tr>
						    <td class="left bottom" colspan=6><textarea class="bottom" id="density_query" name="density_query" rows="2" cols="42"></textarea></td>
						    <td class="bottom">
							<table>
							    <tr><td><button id="density_btn_vfy"><span class="module_font">Verify</span></button></td></tr>
							    <tr><td><input type="checkbox" id="density_gquery">use GUI</td></tr>
							    <tr id="density_gui_input">
								
							    </tr>
							</table>
						    </td>
						</tr>
						<tr><td id="vfy_msg" class="center message_warn" colspan=5></td></tr>
					    </table>
					</div>
				    </td>
				</tr>
			    </table>
			</div>
		    </td>
		</tr>
		Density end--->
	    </table>
	</td></tr>
    </table> <!-- systemInfo end --->
</div>

<!--- dialog --->
<div id="dlg_selInfo" title="Selected Atoms">
    <pre id="dlg_msg"></pre>
</div>